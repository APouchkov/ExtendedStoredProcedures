{
  "$schema": "http://json-schema.org/draft-04/schema#",

  "definitions": {

    "data": {
      "type": "object",
      "properties": {
        "msisdn": { "$ref": "#/definitions/msisdn" },
        "variables": { "$ref": "#/definitions/variables" }
      },
      "required": ["msisdn", "variables"]
    },

    "msisdn": {
      "type": "string",
      "pattern": "^7([0-9]{10})$"
    },

    "variables": {
      "type": "array",
      "items": { "$ref": "#/definitions/variable" }
    },

    "variable": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "status": { "$ref": "#/definitions/variable_status" },
        "value": { "type": "string" },
        "type": { "$ref": "#/definitions/variable_type" },
        "msg": { "type": "string" }
      },
      "required": ["name", "status"],
      "dependencies": {
        "value": ["type"]
      }
    },

    "variable_status": {
      "type": "string",
      "enum": ["SUCCESS", "NOT_FOUND", "UNKNOWN_VARIABLE", "NOT_AUTHORIZED", "BAD_REQUEST", "FAILURE"]
    },

    "variable_type": {
      "type": "string",
      "enum": ["DOUBLE", "INTEGER", "BOOLEAN", "STRING", "DATE"]
    },

    "metadata": {
      "type": "object",
      "properties": {
        "controlGroup": { "type": "boolean" }
      }
    }
  },

  "type": "object",
  "properties" : {
    "id": { "type": "string" },
    "data": { "$ref": "#/definitions/data" },
    "metadata": { "$ref": "#/definitions/metadata" }
  },
  "required": ["id", "data"]
}
